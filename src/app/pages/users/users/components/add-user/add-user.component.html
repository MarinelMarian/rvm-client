<div class="container mt-5">
	<nav
		class="navbar navbar-expand-lg justify-content-between navbar-light my-5">
		<app-back-button></app-back-button>
	</nav>
    <p class="page-title">Adaugă un utilizator:</p>
    
	<form [formGroup]="form" (ngSubmit)="onSubmit()">
		<div class="row">
			<div class="mt-4 col-md-4 col-sm-12">
				<div class="form-group">
					<label>Nume și Prenume *</label>
					<input
						[ngClass]="{ 'error': form.controls.name.invalid && form.controls.name.touched }"
						formControlName="name"
						class="form-control"
						type="text"/>
				</div>
			</div>

			<div class="mt-4 col-md-4 col-sm-12">
				<div class="form-group">
					<label>Email *</label>
					<input
						[ngClass]="{ 'error': form.controls.email.invalid && form.controls.email.touched }"
						formControlName="email"
						class="form-control"
						type="email"
					/>
					<span class="error-message" *ngIf="form.controls.email.invalid && form.controls.email.touched">* {{form.controls.email.errors.email}}</span>
				</div>
			</div>

			<div class="mt-4 col-md-4 col-sm-12">
				<div class="form-group">
					<label>Telefon *</label>
					<input
						[ngClass]="{ 'error': form.controls.phone.invalid && form.controls.phone.touched }"
						formControlName="phone"
						class="form-control"
						type="tel"
					/>
					<span class="error-message" *ngIf="form.controls.phone.invalid && form.controls.phone.touched">* {{form.controls.phone.errors.phone}}</span>
				</div>
			</div>

			<div class="mt-4 col-md-4" [ngStyle]="{'display': displayInstitution ? 'initial' : 'none'}" >
					<div class="form-group">
						<label>Insituție *</label>
						<select class="form-control" formControlName="institution">
							<option *ngFor="let institution of institutions; let i=index" [value]="institution._id">
								{{institution.name}}
							</option>
						</select>
					</div>
				</div>

			<div class="mt-4 col-md-4" [ngStyle]="{'display': displayOrganisation ? 'initial' : 'none'}" >
				<div class="form-group">
					<label>Organizație *</label>
					<select class="form-control" formControlName="organisation">
						<option *ngFor="let organisation of organisations; let i=index" [value]="organisation._id">
							{{organisation.name}}
						</option>
					</select>
				</div>
			</div>

		</div>
		<button
			*ngIf="!loading"
			class="btn btn-info btn-rounded waves-effect waves-light mt-5 float-right"
            type="submit"
            [disabled]="form.invalid">
			{{ user?._id ? 'Editează' : 'Adaugă' }}
		</button>
		<div class="spinner-border text-green float-right" role="status" *ngIf="loading">
			<span class="sr-only">Loading...</span>
		</div>
	</form>
</div>